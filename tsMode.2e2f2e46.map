{"version":3,"sources":["node_modules\\monaco-editor\\esm\\vs\\language\\typescript\\workerManager.js","node_modules\\monaco-editor\\esm\\vs\\language\\typescript\\languageFeatures.js","node_modules\\monaco-editor\\esm\\vs\\language\\typescript\\tsMode.js"],"names":["Promise","monaco","WorkerManager","modeId","defaults","_this","_modeId","_defaults","_worker","_idleCheckInterval","setInterval","_checkIfIdle","_lastUsedTime","_configChangeListener","onDidChange","_stopWorker","prototype","dispose","_client","clearInterval","maxIdleTime","getWorkerMaxIdleTime","timePassedSinceLastUsed","Date","now","_getClient","editor","createWebWorker","moduleId","label","createData","compilerOptions","getCompilerOptions","extraLibs","getExtraLibs","p","getProxy","getEagerModelSync","then","worker","withSyncedResources","getModels","filter","model","getModeId","map","uri","getLanguageServiceWorker","resources","_i","arguments","length","toShallowCancelPromise","client","_","completeCallback","errorCallback","r","c","e","__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","hasOwnProperty","__","constructor","create","Uri","IndentStyle","flattenDiagnosticMessageText","messageText","newLine","diagnosticChain","result","indent","i","next","displayPartsToString","displayParts","displayPart","text","join","Adapter","_positionToOffset","position","getModel","getOffsetAt","_offsetToPosition","offset","getPositionAt","_textSpanToRange","span","p1","start","p2","startLineNumber","lineNumber","startColumn","column","endLineNumber","endColumn","DiagnostcsAdapter","_super","_selector","call","_disposables","_listener","onModelAdd","handle","changeSubscription","onDidChangeContent","clearTimeout","setTimeout","_doValidate","toString","onModelRemoved","setModelMarkers","key","push","onDidCreateModel","onWillDisposeModel","onDidChangeModelLanguage","event","_a","forEach","resource","promises","getDiagnosticsOptions","noSyntaxValidation","noSemanticValidation","getSyntacticDiagnostics","getSemanticDiagnostics","diagnostics","markers","reduce","concat","_convertDiagnostics","done","undefined","err","console","error","diag","_b","severity","MarkerSeverity","Error","message","SuggestAdapter","apply","defineProperty","get","enumerable","configurable","provideCompletionItems","token","wordInfo","getWordUntilPosition","wireCancellationToken","getCompletionsAtPosition","info","suggestions","entries","entry","name","sortText","kind","convertKind","resolveCompletionItem","item","myItem","getCompletionEntryDetails","details","detail","documentation","Kind","primitiveType","keyword","languages","CompletionItemKind","Keyword","variable","localVariable","Variable","memberVariable","memberGetAccessor","memberSetAccessor","Field","function","memberFunction","constructSignature","callSignature","indexSignature","Function","enum","Enum","module","Module","class","Class","interface","Interface","warning","File","Property","SignatureHelpAdapter","signatureHelpTriggerCharacters","provideSignatureHelp","getSignatureHelpItems","ret","activeSignature","selectedItemIndex","activeParameter","argumentIndex","signatures","items","signature","parameters","prefixDisplayParts","a","parameter","separatorDisplayParts","suffixDisplayParts","QuickInfoAdapter","provideHover","getQuickInfoAtPosition","tags","tag","match","contents","range","textSpan","value","OccurrencesAdapter","provideDocumentHighlights","getOccurrencesAtPosition","isWriteAccess","DocumentHighlightKind","Write","Text","DefinitionAdapter","provideDefinition","getDefinitionAtPosition","entries_1","parse","fileName","ReferenceAdapter","provideReferences","context","getReferencesAtPosition","entries_2","OutlineAdapter","provideDocumentSymbols","getNavigationBarItems","convert","bucket","containerLabel","outlineTypeTable","SymbolKind","spans","selectionRange","containerName","childItems","child","unknown","script","type","localFunction","constructorImplementation","typeParameter","alias","const","let","Method","FormatHelper","_convertOptions","options","ConvertTabsToSpaces","insertSpaces","TabSize","tabSize","IndentSize","Smart","NewLineCharacter","InsertSpaceAfterCommaDelimiter","InsertSpaceAfterSemicolonInForStatements","InsertSpaceBeforeAndAfterBinaryOperators","InsertSpaceAfterKeywordsInControlFlowStatements","InsertSpaceAfterFunctionKeywordForAnonymousFunctions","InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis","InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets","InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces","PlaceOpenBraceOnNewLineForControlBlocks","PlaceOpenBraceOnNewLineForFunctions","_convertTextChanges","change","newText","FormatAdapter","provideDocumentRangeFormattingEdits","getFormattingEditsForRange","edits","edit","FormatOnTypeAdapter","provideOnTypeFormattingEdits","ch","getFormattingEditsAfterKeystroke","promise","onCancellationRequested","cancel","setupTypeScript","setupJavaScript","getJavaScriptWorker","getTypeScriptWorker","languageFeatures","javaScriptWorker","typeScriptWorker","setupMode","resolve","reject","first","more","registerCompletionItemProvider","registerSignatureHelpProvider","registerHoverProvider","registerDocumentHighlightProvider","registerDefinitionProvider","registerReferenceProvider","registerDocumentSymbolProvider","registerDocumentRangeFormattingEditProvider","registerOnTypeFormattingEditProvider"],"mappings":"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","file":"tsMode.2e2f2e46.map","sourceRoot":"..","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar Promise = monaco.Promise;\nvar WorkerManager = /** @class */ (function () {\n    function WorkerManager(modeId, defaults) {\n        var _this = this;\n        this._modeId = modeId;\n        this._defaults = defaults;\n        this._worker = null;\n        this._idleCheckInterval = setInterval(function () { return _this._checkIfIdle(); }, 30 * 1000);\n        this._lastUsedTime = 0;\n        this._configChangeListener = this._defaults.onDidChange(function () { return _this._stopWorker(); });\n    }\n    WorkerManager.prototype._stopWorker = function () {\n        if (this._worker) {\n            this._worker.dispose();\n            this._worker = null;\n        }\n        this._client = null;\n    };\n    WorkerManager.prototype.dispose = function () {\n        clearInterval(this._idleCheckInterval);\n        this._configChangeListener.dispose();\n        this._stopWorker();\n    };\n    WorkerManager.prototype._checkIfIdle = function () {\n        if (!this._worker) {\n            return;\n        }\n        var maxIdleTime = this._defaults.getWorkerMaxIdleTime();\n        var timePassedSinceLastUsed = Date.now() - this._lastUsedTime;\n        if (maxIdleTime > 0 && timePassedSinceLastUsed > maxIdleTime) {\n            this._stopWorker();\n        }\n    };\n    WorkerManager.prototype._getClient = function () {\n        var _this = this;\n        this._lastUsedTime = Date.now();\n        if (!this._client) {\n            this._worker = monaco.editor.createWebWorker({\n                // module that exports the create() method and returns a `TypeScriptWorker` instance\n                moduleId: 'vs/language/typescript/tsWorker',\n                label: this._modeId,\n                // passed in to the create() method\n                createData: {\n                    compilerOptions: this._defaults.getCompilerOptions(),\n                    extraLibs: this._defaults.getExtraLibs()\n                }\n            });\n            var p = this._worker.getProxy();\n            if (this._defaults.getEagerModelSync()) {\n                p = p.then(function (worker) {\n                    return _this._worker.withSyncedResources(monaco.editor.getModels()\n                        .filter(function (model) { return model.getModeId() === _this._modeId; })\n                        .map(function (model) { return model.uri; }));\n                });\n            }\n            this._client = p;\n        }\n        return this._client;\n    };\n    WorkerManager.prototype.getLanguageServiceWorker = function () {\n        var _this = this;\n        var resources = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            resources[_i] = arguments[_i];\n        }\n        var _client;\n        return toShallowCancelPromise(this._getClient().then(function (client) {\n            _client = client;\n        }).then(function (_) {\n            return _this._worker.withSyncedResources(resources);\n        }).then(function (_) { return _client; }));\n    };\n    return WorkerManager;\n}());\nexport { WorkerManager };\nfunction toShallowCancelPromise(p) {\n    var completeCallback;\n    var errorCallback;\n    var r = new Promise(function (c, e) {\n        completeCallback = c;\n        errorCallback = e;\n    }, function () { });\n    p.then(completeCallback, errorCallback);\n    return r;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar Uri = monaco.Uri;\nvar Promise = monaco.Promise;\n//#region utils copied from typescript to prevent loading the entire typescriptServices ---\nvar IndentStyle;\n(function (IndentStyle) {\n    IndentStyle[IndentStyle[\"None\"] = 0] = \"None\";\n    IndentStyle[IndentStyle[\"Block\"] = 1] = \"Block\";\n    IndentStyle[IndentStyle[\"Smart\"] = 2] = \"Smart\";\n})(IndentStyle || (IndentStyle = {}));\nfunction flattenDiagnosticMessageText(messageText, newLine) {\n    if (typeof messageText === \"string\") {\n        return messageText;\n    }\n    else {\n        var diagnosticChain = messageText;\n        var result = \"\";\n        var indent = 0;\n        while (diagnosticChain) {\n            if (indent) {\n                result += newLine;\n                for (var i = 0; i < indent; i++) {\n                    result += \"  \";\n                }\n            }\n            result += diagnosticChain.messageText;\n            indent++;\n            diagnosticChain = diagnosticChain.next;\n        }\n        return result;\n    }\n}\nfunction displayPartsToString(displayParts) {\n    if (displayParts) {\n        return displayParts.map(function (displayPart) { return displayPart.text; }).join(\"\");\n    }\n    return \"\";\n}\n//#endregion\nvar Adapter = /** @class */ (function () {\n    function Adapter(_worker) {\n        this._worker = _worker;\n    }\n    Adapter.prototype._positionToOffset = function (uri, position) {\n        var model = monaco.editor.getModel(uri);\n        return model.getOffsetAt(position);\n    };\n    Adapter.prototype._offsetToPosition = function (uri, offset) {\n        var model = monaco.editor.getModel(uri);\n        return model.getPositionAt(offset);\n    };\n    Adapter.prototype._textSpanToRange = function (uri, span) {\n        var p1 = this._offsetToPosition(uri, span.start);\n        var p2 = this._offsetToPosition(uri, span.start + span.length);\n        var startLineNumber = p1.lineNumber, startColumn = p1.column;\n        var endLineNumber = p2.lineNumber, endColumn = p2.column;\n        return { startLineNumber: startLineNumber, startColumn: startColumn, endLineNumber: endLineNumber, endColumn: endColumn };\n    };\n    return Adapter;\n}());\nexport { Adapter };\n// --- diagnostics --- ---\nvar DiagnostcsAdapter = /** @class */ (function (_super) {\n    __extends(DiagnostcsAdapter, _super);\n    function DiagnostcsAdapter(_defaults, _selector, worker) {\n        var _this = _super.call(this, worker) || this;\n        _this._defaults = _defaults;\n        _this._selector = _selector;\n        _this._disposables = [];\n        _this._listener = Object.create(null);\n        var onModelAdd = function (model) {\n            if (model.getModeId() !== _selector) {\n                return;\n            }\n            var handle;\n            var changeSubscription = model.onDidChangeContent(function () {\n                clearTimeout(handle);\n                handle = setTimeout(function () { return _this._doValidate(model.uri); }, 500);\n            });\n            _this._listener[model.uri.toString()] = {\n                dispose: function () {\n                    changeSubscription.dispose();\n                    clearTimeout(handle);\n                }\n            };\n            _this._doValidate(model.uri);\n        };\n        var onModelRemoved = function (model) {\n            monaco.editor.setModelMarkers(model, _this._selector, []);\n            var key = model.uri.toString();\n            if (_this._listener[key]) {\n                _this._listener[key].dispose();\n                delete _this._listener[key];\n            }\n        };\n        _this._disposables.push(monaco.editor.onDidCreateModel(onModelAdd));\n        _this._disposables.push(monaco.editor.onWillDisposeModel(onModelRemoved));\n        _this._disposables.push(monaco.editor.onDidChangeModelLanguage(function (event) {\n            onModelRemoved(event.model);\n            onModelAdd(event.model);\n        }));\n        _this._disposables.push({\n            dispose: function () {\n                for (var _i = 0, _a = monaco.editor.getModels(); _i < _a.length; _i++) {\n                    var model = _a[_i];\n                    onModelRemoved(model);\n                }\n            }\n        });\n        _this._disposables.push(_this._defaults.onDidChange(function () {\n            // redo diagnostics when options change\n            for (var _i = 0, _a = monaco.editor.getModels(); _i < _a.length; _i++) {\n                var model = _a[_i];\n                onModelRemoved(model);\n                onModelAdd(model);\n            }\n        }));\n        monaco.editor.getModels().forEach(onModelAdd);\n        return _this;\n    }\n    DiagnostcsAdapter.prototype.dispose = function () {\n        this._disposables.forEach(function (d) { return d && d.dispose(); });\n        this._disposables = [];\n    };\n    DiagnostcsAdapter.prototype._doValidate = function (resource) {\n        var _this = this;\n        this._worker(resource).then(function (worker) {\n            if (!monaco.editor.getModel(resource)) {\n                // model was disposed in the meantime\n                return null;\n            }\n            var promises = [];\n            var _a = _this._defaults.getDiagnosticsOptions(), noSyntaxValidation = _a.noSyntaxValidation, noSemanticValidation = _a.noSemanticValidation;\n            if (!noSyntaxValidation) {\n                promises.push(worker.getSyntacticDiagnostics(resource.toString()));\n            }\n            if (!noSemanticValidation) {\n                promises.push(worker.getSemanticDiagnostics(resource.toString()));\n            }\n            return Promise.join(promises);\n        }).then(function (diagnostics) {\n            if (!diagnostics || !monaco.editor.getModel(resource)) {\n                // model was disposed in the meantime\n                return null;\n            }\n            var markers = diagnostics\n                .reduce(function (p, c) { return c.concat(p); }, [])\n                .map(function (d) { return _this._convertDiagnostics(resource, d); });\n            monaco.editor.setModelMarkers(monaco.editor.getModel(resource), _this._selector, markers);\n        }).done(undefined, function (err) {\n            console.error(err);\n        });\n    };\n    DiagnostcsAdapter.prototype._convertDiagnostics = function (resource, diag) {\n        var _a = this._offsetToPosition(resource, diag.start), startLineNumber = _a.lineNumber, startColumn = _a.column;\n        var _b = this._offsetToPosition(resource, diag.start + diag.length), endLineNumber = _b.lineNumber, endColumn = _b.column;\n        return {\n            severity: monaco.MarkerSeverity.Error,\n            startLineNumber: startLineNumber,\n            startColumn: startColumn,\n            endLineNumber: endLineNumber,\n            endColumn: endColumn,\n            message: flattenDiagnosticMessageText(diag.messageText, '\\n')\n        };\n    };\n    return DiagnostcsAdapter;\n}(Adapter));\nexport { DiagnostcsAdapter };\nvar SuggestAdapter = /** @class */ (function (_super) {\n    __extends(SuggestAdapter, _super);\n    function SuggestAdapter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(SuggestAdapter.prototype, \"triggerCharacters\", {\n        get: function () {\n            return ['.'];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SuggestAdapter.prototype.provideCompletionItems = function (model, position, token) {\n        var wordInfo = model.getWordUntilPosition(position);\n        var resource = model.uri;\n        var offset = this._positionToOffset(resource, position);\n        return wireCancellationToken(token, this._worker(resource).then(function (worker) {\n            return worker.getCompletionsAtPosition(resource.toString(), offset);\n        }).then(function (info) {\n            if (!info) {\n                return;\n            }\n            var suggestions = info.entries.map(function (entry) {\n                return {\n                    uri: resource,\n                    position: position,\n                    label: entry.name,\n                    sortText: entry.sortText,\n                    kind: SuggestAdapter.convertKind(entry.kind)\n                };\n            });\n            return suggestions;\n        }));\n    };\n    SuggestAdapter.prototype.resolveCompletionItem = function (item, token) {\n        var _this = this;\n        var myItem = item;\n        var resource = myItem.uri;\n        var position = myItem.position;\n        return wireCancellationToken(token, this._worker(resource).then(function (worker) {\n            return worker.getCompletionEntryDetails(resource.toString(), _this._positionToOffset(resource, position), myItem.label);\n        }).then(function (details) {\n            if (!details) {\n                return myItem;\n            }\n            return {\n                uri: resource,\n                position: position,\n                label: details.name,\n                kind: SuggestAdapter.convertKind(details.kind),\n                detail: displayPartsToString(details.displayParts),\n                documentation: displayPartsToString(details.documentation)\n            };\n        }));\n    };\n    SuggestAdapter.convertKind = function (kind) {\n        switch (kind) {\n            case Kind.primitiveType:\n            case Kind.keyword:\n                return monaco.languages.CompletionItemKind.Keyword;\n            case Kind.variable:\n            case Kind.localVariable:\n                return monaco.languages.CompletionItemKind.Variable;\n            case Kind.memberVariable:\n            case Kind.memberGetAccessor:\n            case Kind.memberSetAccessor:\n                return monaco.languages.CompletionItemKind.Field;\n            case Kind.function:\n            case Kind.memberFunction:\n            case Kind.constructSignature:\n            case Kind.callSignature:\n            case Kind.indexSignature:\n                return monaco.languages.CompletionItemKind.Function;\n            case Kind.enum:\n                return monaco.languages.CompletionItemKind.Enum;\n            case Kind.module:\n                return monaco.languages.CompletionItemKind.Module;\n            case Kind.class:\n                return monaco.languages.CompletionItemKind.Class;\n            case Kind.interface:\n                return monaco.languages.CompletionItemKind.Interface;\n            case Kind.warning:\n                return monaco.languages.CompletionItemKind.File;\n        }\n        return monaco.languages.CompletionItemKind.Property;\n    };\n    return SuggestAdapter;\n}(Adapter));\nexport { SuggestAdapter };\nvar SignatureHelpAdapter = /** @class */ (function (_super) {\n    __extends(SignatureHelpAdapter, _super);\n    function SignatureHelpAdapter() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.signatureHelpTriggerCharacters = ['(', ','];\n        return _this;\n    }\n    SignatureHelpAdapter.prototype.provideSignatureHelp = function (model, position, token) {\n        var _this = this;\n        var resource = model.uri;\n        return wireCancellationToken(token, this._worker(resource).then(function (worker) { return worker.getSignatureHelpItems(resource.toString(), _this._positionToOffset(resource, position)); }).then(function (info) {\n            if (!info) {\n                return;\n            }\n            var ret = {\n                activeSignature: info.selectedItemIndex,\n                activeParameter: info.argumentIndex,\n                signatures: []\n            };\n            info.items.forEach(function (item) {\n                var signature = {\n                    label: '',\n                    documentation: null,\n                    parameters: []\n                };\n                signature.label += displayPartsToString(item.prefixDisplayParts);\n                item.parameters.forEach(function (p, i, a) {\n                    var label = displayPartsToString(p.displayParts);\n                    var parameter = {\n                        label: label,\n                        documentation: displayPartsToString(p.documentation)\n                    };\n                    signature.label += label;\n                    signature.parameters.push(parameter);\n                    if (i < a.length - 1) {\n                        signature.label += displayPartsToString(item.separatorDisplayParts);\n                    }\n                });\n                signature.label += displayPartsToString(item.suffixDisplayParts);\n                ret.signatures.push(signature);\n            });\n            return ret;\n        }));\n    };\n    return SignatureHelpAdapter;\n}(Adapter));\nexport { SignatureHelpAdapter };\n// --- hover ------\nvar QuickInfoAdapter = /** @class */ (function (_super) {\n    __extends(QuickInfoAdapter, _super);\n    function QuickInfoAdapter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    QuickInfoAdapter.prototype.provideHover = function (model, position, token) {\n        var _this = this;\n        var resource = model.uri;\n        return wireCancellationToken(token, this._worker(resource).then(function (worker) {\n            return worker.getQuickInfoAtPosition(resource.toString(), _this._positionToOffset(resource, position));\n        }).then(function (info) {\n            if (!info) {\n                return;\n            }\n            var documentation = displayPartsToString(info.documentation);\n            var tags = info.tags ? info.tags.map(function (tag) {\n                var label = \"*@\" + tag.name + \"*\";\n                if (!tag.text) {\n                    return label;\n                }\n                return label + (tag.text.match(/\\r\\n|\\n/g) ? ' \\n' + tag.text : \" - \" + tag.text);\n            })\n                .join('  \\n\\n') : '';\n            var contents = displayPartsToString(info.displayParts);\n            return {\n                range: _this._textSpanToRange(resource, info.textSpan),\n                contents: [{\n                        value: '```js\\n' + contents + '\\n```\\n'\n                    }, {\n                        value: documentation + (tags ? '\\n\\n' + tags : '')\n                    }]\n            };\n        }));\n    };\n    return QuickInfoAdapter;\n}(Adapter));\nexport { QuickInfoAdapter };\n// --- occurrences ------\nvar OccurrencesAdapter = /** @class */ (function (_super) {\n    __extends(OccurrencesAdapter, _super);\n    function OccurrencesAdapter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    OccurrencesAdapter.prototype.provideDocumentHighlights = function (model, position, token) {\n        var _this = this;\n        var resource = model.uri;\n        return wireCancellationToken(token, this._worker(resource).then(function (worker) {\n            return worker.getOccurrencesAtPosition(resource.toString(), _this._positionToOffset(resource, position));\n        }).then(function (entries) {\n            if (!entries) {\n                return;\n            }\n            return entries.map(function (entry) {\n                return {\n                    range: _this._textSpanToRange(resource, entry.textSpan),\n                    kind: entry.isWriteAccess ? monaco.languages.DocumentHighlightKind.Write : monaco.languages.DocumentHighlightKind.Text\n                };\n            });\n        }));\n    };\n    return OccurrencesAdapter;\n}(Adapter));\nexport { OccurrencesAdapter };\n// --- definition ------\nvar DefinitionAdapter = /** @class */ (function (_super) {\n    __extends(DefinitionAdapter, _super);\n    function DefinitionAdapter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DefinitionAdapter.prototype.provideDefinition = function (model, position, token) {\n        var _this = this;\n        var resource = model.uri;\n        return wireCancellationToken(token, this._worker(resource).then(function (worker) {\n            return worker.getDefinitionAtPosition(resource.toString(), _this._positionToOffset(resource, position));\n        }).then(function (entries) {\n            if (!entries) {\n                return;\n            }\n            var result = [];\n            for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n                var entry = entries_1[_i];\n                var uri = Uri.parse(entry.fileName);\n                if (monaco.editor.getModel(uri)) {\n                    result.push({\n                        uri: uri,\n                        range: _this._textSpanToRange(uri, entry.textSpan)\n                    });\n                }\n            }\n            return result;\n        }));\n    };\n    return DefinitionAdapter;\n}(Adapter));\nexport { DefinitionAdapter };\n// --- references ------\nvar ReferenceAdapter = /** @class */ (function (_super) {\n    __extends(ReferenceAdapter, _super);\n    function ReferenceAdapter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ReferenceAdapter.prototype.provideReferences = function (model, position, context, token) {\n        var _this = this;\n        var resource = model.uri;\n        return wireCancellationToken(token, this._worker(resource).then(function (worker) {\n            return worker.getReferencesAtPosition(resource.toString(), _this._positionToOffset(resource, position));\n        }).then(function (entries) {\n            if (!entries) {\n                return;\n            }\n            var result = [];\n            for (var _i = 0, entries_2 = entries; _i < entries_2.length; _i++) {\n                var entry = entries_2[_i];\n                var uri = Uri.parse(entry.fileName);\n                if (monaco.editor.getModel(uri)) {\n                    result.push({\n                        uri: uri,\n                        range: _this._textSpanToRange(uri, entry.textSpan)\n                    });\n                }\n            }\n            return result;\n        }));\n    };\n    return ReferenceAdapter;\n}(Adapter));\nexport { ReferenceAdapter };\n// --- outline ------\nvar OutlineAdapter = /** @class */ (function (_super) {\n    __extends(OutlineAdapter, _super);\n    function OutlineAdapter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    OutlineAdapter.prototype.provideDocumentSymbols = function (model, token) {\n        var _this = this;\n        var resource = model.uri;\n        return wireCancellationToken(token, this._worker(resource).then(function (worker) { return worker.getNavigationBarItems(resource.toString()); }).then(function (items) {\n            if (!items) {\n                return;\n            }\n            var convert = function (bucket, item, containerLabel) {\n                var result = {\n                    name: item.text,\n                    detail: '',\n                    kind: (outlineTypeTable[item.kind] || monaco.languages.SymbolKind.Variable),\n                    range: _this._textSpanToRange(resource, item.spans[0]),\n                    selectionRange: _this._textSpanToRange(resource, item.spans[0]),\n                    containerName: containerLabel\n                };\n                if (item.childItems && item.childItems.length > 0) {\n                    for (var _i = 0, _a = item.childItems; _i < _a.length; _i++) {\n                        var child = _a[_i];\n                        convert(bucket, child, result.name);\n                    }\n                }\n                bucket.push(result);\n            };\n            var result = [];\n            items.forEach(function (item) { return convert(result, item); });\n            return result;\n        }));\n    };\n    return OutlineAdapter;\n}(Adapter));\nexport { OutlineAdapter };\nvar Kind = /** @class */ (function () {\n    function Kind() {\n    }\n    Kind.unknown = '';\n    Kind.keyword = 'keyword';\n    Kind.script = 'script';\n    Kind.module = 'module';\n    Kind.class = 'class';\n    Kind.interface = 'interface';\n    Kind.type = 'type';\n    Kind.enum = 'enum';\n    Kind.variable = 'var';\n    Kind.localVariable = 'local var';\n    Kind.function = 'function';\n    Kind.localFunction = 'local function';\n    Kind.memberFunction = 'method';\n    Kind.memberGetAccessor = 'getter';\n    Kind.memberSetAccessor = 'setter';\n    Kind.memberVariable = 'property';\n    Kind.constructorImplementation = 'constructor';\n    Kind.callSignature = 'call';\n    Kind.indexSignature = 'index';\n    Kind.constructSignature = 'construct';\n    Kind.parameter = 'parameter';\n    Kind.typeParameter = 'type parameter';\n    Kind.primitiveType = 'primitive type';\n    Kind.label = 'label';\n    Kind.alias = 'alias';\n    Kind.const = 'const';\n    Kind.let = 'let';\n    Kind.warning = 'warning';\n    return Kind;\n}());\nexport { Kind };\nvar outlineTypeTable = Object.create(null);\noutlineTypeTable[Kind.module] = monaco.languages.SymbolKind.Module;\noutlineTypeTable[Kind.class] = monaco.languages.SymbolKind.Class;\noutlineTypeTable[Kind.enum] = monaco.languages.SymbolKind.Enum;\noutlineTypeTable[Kind.interface] = monaco.languages.SymbolKind.Interface;\noutlineTypeTable[Kind.memberFunction] = monaco.languages.SymbolKind.Method;\noutlineTypeTable[Kind.memberVariable] = monaco.languages.SymbolKind.Property;\noutlineTypeTable[Kind.memberGetAccessor] = monaco.languages.SymbolKind.Property;\noutlineTypeTable[Kind.memberSetAccessor] = monaco.languages.SymbolKind.Property;\noutlineTypeTable[Kind.variable] = monaco.languages.SymbolKind.Variable;\noutlineTypeTable[Kind.const] = monaco.languages.SymbolKind.Variable;\noutlineTypeTable[Kind.localVariable] = monaco.languages.SymbolKind.Variable;\noutlineTypeTable[Kind.variable] = monaco.languages.SymbolKind.Variable;\noutlineTypeTable[Kind.function] = monaco.languages.SymbolKind.Function;\noutlineTypeTable[Kind.localFunction] = monaco.languages.SymbolKind.Function;\n// --- formatting ----\nvar FormatHelper = /** @class */ (function (_super) {\n    __extends(FormatHelper, _super);\n    function FormatHelper() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FormatHelper._convertOptions = function (options) {\n        return {\n            ConvertTabsToSpaces: options.insertSpaces,\n            TabSize: options.tabSize,\n            IndentSize: options.tabSize,\n            IndentStyle: IndentStyle.Smart,\n            NewLineCharacter: '\\n',\n            InsertSpaceAfterCommaDelimiter: true,\n            InsertSpaceAfterSemicolonInForStatements: true,\n            InsertSpaceBeforeAndAfterBinaryOperators: true,\n            InsertSpaceAfterKeywordsInControlFlowStatements: true,\n            InsertSpaceAfterFunctionKeywordForAnonymousFunctions: true,\n            InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis: false,\n            InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets: false,\n            InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces: false,\n            PlaceOpenBraceOnNewLineForControlBlocks: false,\n            PlaceOpenBraceOnNewLineForFunctions: false\n        };\n    };\n    FormatHelper.prototype._convertTextChanges = function (uri, change) {\n        return {\n            text: change.newText,\n            range: this._textSpanToRange(uri, change.span)\n        };\n    };\n    return FormatHelper;\n}(Adapter));\nexport { FormatHelper };\nvar FormatAdapter = /** @class */ (function (_super) {\n    __extends(FormatAdapter, _super);\n    function FormatAdapter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FormatAdapter.prototype.provideDocumentRangeFormattingEdits = function (model, range, options, token) {\n        var _this = this;\n        var resource = model.uri;\n        return wireCancellationToken(token, this._worker(resource).then(function (worker) {\n            return worker.getFormattingEditsForRange(resource.toString(), _this._positionToOffset(resource, { lineNumber: range.startLineNumber, column: range.startColumn }), _this._positionToOffset(resource, { lineNumber: range.endLineNumber, column: range.endColumn }), FormatHelper._convertOptions(options));\n        }).then(function (edits) {\n            if (edits) {\n                return edits.map(function (edit) { return _this._convertTextChanges(resource, edit); });\n            }\n        }));\n    };\n    return FormatAdapter;\n}(FormatHelper));\nexport { FormatAdapter };\nvar FormatOnTypeAdapter = /** @class */ (function (_super) {\n    __extends(FormatOnTypeAdapter, _super);\n    function FormatOnTypeAdapter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(FormatOnTypeAdapter.prototype, \"autoFormatTriggerCharacters\", {\n        get: function () {\n            return [';', '}', '\\n'];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    FormatOnTypeAdapter.prototype.provideOnTypeFormattingEdits = function (model, position, ch, options, token) {\n        var _this = this;\n        var resource = model.uri;\n        return wireCancellationToken(token, this._worker(resource).then(function (worker) {\n            return worker.getFormattingEditsAfterKeystroke(resource.toString(), _this._positionToOffset(resource, position), ch, FormatHelper._convertOptions(options));\n        }).then(function (edits) {\n            if (edits) {\n                return edits.map(function (edit) { return _this._convertTextChanges(resource, edit); });\n            }\n        }));\n    };\n    return FormatOnTypeAdapter;\n}(FormatHelper));\nexport { FormatOnTypeAdapter };\n/**\n * Hook a cancellation token to a WinJS Promise\n */\nfunction wireCancellationToken(token, promise) {\n    token.onCancellationRequested(function () { return promise.cancel(); });\n    return promise;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { WorkerManager } from './workerManager.js';\nimport * as languageFeatures from './languageFeatures.js';\nvar javaScriptWorker;\nvar typeScriptWorker;\nexport function setupTypeScript(defaults) {\n    typeScriptWorker = setupMode(defaults, 'typescript');\n}\nexport function setupJavaScript(defaults) {\n    javaScriptWorker = setupMode(defaults, 'javascript');\n}\nexport function getJavaScriptWorker() {\n    return new monaco.Promise(function (resolve, reject) {\n        if (!javaScriptWorker) {\n            return reject(\"JavaScript not registered!\");\n        }\n        resolve(javaScriptWorker);\n    });\n}\nexport function getTypeScriptWorker() {\n    return new monaco.Promise(function (resolve, reject) {\n        if (!typeScriptWorker) {\n            return reject(\"TypeScript not registered!\");\n        }\n        resolve(typeScriptWorker);\n    });\n}\nfunction setupMode(defaults, modeId) {\n    var client = new WorkerManager(modeId, defaults);\n    var worker = function (first) {\n        var more = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            more[_i - 1] = arguments[_i];\n        }\n        return client.getLanguageServiceWorker.apply(client, [first].concat(more));\n    };\n    monaco.languages.registerCompletionItemProvider(modeId, new languageFeatures.SuggestAdapter(worker));\n    monaco.languages.registerSignatureHelpProvider(modeId, new languageFeatures.SignatureHelpAdapter(worker));\n    monaco.languages.registerHoverProvider(modeId, new languageFeatures.QuickInfoAdapter(worker));\n    monaco.languages.registerDocumentHighlightProvider(modeId, new languageFeatures.OccurrencesAdapter(worker));\n    monaco.languages.registerDefinitionProvider(modeId, new languageFeatures.DefinitionAdapter(worker));\n    monaco.languages.registerReferenceProvider(modeId, new languageFeatures.ReferenceAdapter(worker));\n    monaco.languages.registerDocumentSymbolProvider(modeId, new languageFeatures.OutlineAdapter(worker));\n    monaco.languages.registerDocumentRangeFormattingEditProvider(modeId, new languageFeatures.FormatAdapter(worker));\n    monaco.languages.registerOnTypeFormattingEditProvider(modeId, new languageFeatures.FormatOnTypeAdapter(worker));\n    new languageFeatures.DiagnostcsAdapter(defaults, modeId, worker);\n    return worker;\n}\n"]}